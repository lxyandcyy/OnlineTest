(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6daa4d81"],{"51e0":function(e,t,o){},9041:function(e,t,o){"use strict";var i=o("51e0"),n=o.n(i);n.a},be1c:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"edit-paper"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[o("el-form-item",{attrs:{label:"学科",prop:"subject_id",required:""}},[o("el-select",{attrs:{placeholder:"请选择学科"},model:{value:e.form.subject_id,callback:function(t){e.$set(e.form,"subject_id",t)},expression:"form.subject_id"}})],1),o("el-form-item",{attrs:{label:"试卷名称：",prop:"name",required:""}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),o("el-button",{staticClass:"link-left",staticStyle:{"margin-left":"20px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addQuestion()}}},[e._v(" 添加题目 ")]),0!==e.form.questionItems.length?o("el-card",{staticClass:"exampaper-item-box"},e._l(e.form.questionItems,(function(t,i){return o("el-form-item",{key:i,staticStyle:{"margin-bottom":"15px"},attrs:{label:"题目"+(i+1)+"："}},[o("el-row",[o("el-col",{attrs:{span:23}},[o("QuestionShow",{attrs:{question:t}})],1),o("el-col",{attrs:{span:1}},[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.form.questionItems.splice(i,1)}}},[e._v("删除")])],1)],1)],1)})),1):e._e()],1),o("el-form-item",{attrs:{label:"时长：",prop:"countdown",required:""}},[o("el-input",{attrs:{placeholder:"分钟"},model:{value:e.form.countdown,callback:function(t){e.$set(e.form,"countdown",t)},expression:"form.countdown"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),o("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1),o("el-dialog",{attrs:{visible:e.questionPage.showDialog,width:"70%"},on:{"update:visible":function(t){return e.$set(e.questionPage,"showDialog",t)}}},[o("el-form",{ref:"queryForm",attrs:{model:e.questionPage.queryParam,inline:!0}},[o("el-form-item",{attrs:{label:"ID："}},[o("el-input",{attrs:{clearable:""},model:{value:e.questionPage.queryParam.id,callback:function(t){e.$set(e.questionPage.queryParam,"id",t)},expression:"questionPage.queryParam.id"}})],1),o("el-form-item",{attrs:{label:"题干："}},[o("el-input",{attrs:{clearable:""},model:{value:e.questionPage.queryParam.topic,callback:function(t){e.$set(e.questionPage.queryParam,"topic",t)},expression:"questionPage.queryParam.topic"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.queryForm}},[e._v("查询")])],1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.questionPage.listLoading,expression:"questionPage.listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.questionPage.tableData,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"35"}}),o("el-table-column",{attrs:{prop:"id",label:"Id",width:"60px"}}),o("el-table-column",{attrs:{prop:"subject_id",label:"学科",width:"70px"}}),o("el-table-column",{attrs:{prop:"topic",label:"题干","show-overflow-tooltip":""}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.questionPage.showDialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirmQuestionSelect}},[e._v("确定")])],1)],1)],1)},n=[],a=(o("4160"),o("b0c0"),o("ac1f"),o("841c"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"line-height":"1.8"}},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[o("div",{staticClass:"q-topic"},[e._v(e._s(e.question.topic))]),o("div",{staticClass:"q-options"},e._l(e.question.options,(function(t){return o("span",{key:t.prefix},[o("span",{staticClass:"q-item-prefix"},[e._v(e._s(t.prefix)+". ")]),o("span",{staticClass:"q-item-content"},[e._v(e._s(t.content))])])})),0)])])}),s=[],r=(o("a9e3"),{name:"QuestionShow",data:function(){return{test:!0}},props:{question:{type:Object,default:function(){return{}}},qLoading:{type:Boolean,default:!1},qType:{type:Number,default:1}},methods:{}}),l=r,u=(o("9041"),o("2877")),c=Object(u["a"])(l,a,s,!1,null,"48de8eb9",null),m=c.exports,d={components:{QuestionShow:m},created:function(){var e=this,t=this.$route.query.id;console.log("当前编辑的试卷id是：",t),this.$api.SelPaper(t).then((function(t){console.log("当前编辑的试卷初始数据是：",t),e.form={id:t.pap.id,subject_id:t.pap.subject_id,name:t.pap.name,countdown:t.pap.countdown,questionItems:t.questionItems},console.log(e.form)})).catch((function(e){return console.log(e)}))},data:function(){return{form:{id:null,subject_id:1,name:"",countdown:null,questionItems:[]},questionPage:{multipleSelection:[],showDialog:!1,queryParam:{id:null,subject_id:1,pageIndex:1,pageSize:5},listLoading:!0,tableData:null,total:0},rules:{subject_id:[{required:!0,message:"请选择学科",trigger:"change"}],name:[{required:!0,message:"请输入试卷名称",trigger:"blur"}],countdown:[{required:!0,message:"请输入考试时长",trigger:"blur"}]}}},methods:{addQuestion:function(){this.search(),this.questionPage.showDialog=!0},search:function(){var e=this;this.questionPage.queryParam.subject_id=this.form.subject_id,this.$api.QueList().then((function(t){console.log("题库列表：",t),e.questionPage.tableData=t,e.questionPage.listLoading=!1}))},resetForm:function(){this.$refs["form"].resetFields()},queryForm:function(){},handleSelectionChange:function(e){this.questionPage.multipleSelection=e,console.log(e)},confirmQuestionSelect:function(){var e=this;this.questionPage.multipleSelection.forEach((function(t){e.form.questionItems.push(t)})),this.questionPage.showDialog=!1},submitForm:function(){var e=this;this.form.create_time=Date.now(),this.$refs.form.validate((function(t){if(!t)return e.$message.info("请把表单填写完整！"),!1;e.$api.EditPaper(e.form).then((function(t){console.log(t),e.$message.success("试卷编辑成功！"),e.$router.push({path:"/layout/paper-bank"})})).catch((function(t){console.log(t),e.$message.error({content:"编辑试卷失败，请检查网络！"})}))}))}}},p=d,f=Object(u["a"])(p,i,n,!1,null,"087d3c99",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-6daa4d81.0ade1cdb.js.map